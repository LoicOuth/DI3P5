---
layout: Part
author: "Quentin ARDENOY et Ruihau TETAHIO"
---

# Les scénarios

[[toc]]

## Introduction

Afin d'améliorer la résilience de notre infrastructure, une stratégie basée sur le Chaos Engineering a été mise en place. Ainsi, les scénarios ci-dessous ont été implémentés.

Afin de simplifier la compréhension concernant la couverture des scénarios, un système de périmètre a été mis en place. Chaque application a son propre périmètre et les scénarios sont représentés dans chaque périmètre selon le code couleur suivant :

- Le scénario est représenté avec la couleur <span style=color: #ABABAB;>grise</span> - Le scénario est affecté au périmètre mais n'a pas encore été testé
- Le scénario est représenté avec la couleur <span style=color: #493795;>mauve</span> - Le scénario a été testé et validé dans le périmètre défini
- Le scénario est représenté avec la couleur <span style=color: #FF3333;>rouge</span> - Le scénario a été testé mais a échoué dans le périmètre défini

Voici le schéma de la couverture actuelle :

<iframe frameborder="0" style="width:100%;height:800px;" src="https://viewer.diagrams.net/?tags=%7B%7D&highlight=FF2457&edit=_blank&layers=1&nav=1&title=USite%20-%20Schemas.drawio#R7V1bd5u42v41XnvmAhYS58sc6nZmp53sJjPTfjddGIRNg8EDOIf59Z8EyAYkx2BzsBPqtRqQQQa9j96zXk3kq%2BXzx8haLT6HDvInUHKeJ%2FL1BEJo6Br%2BQ1peshYgGXnLPPKcvG3bcOf9i%2BiFeevac1BcujAJQz%2FxVuVGOwwCZCelNiuKwqfyZW7ol391Zc0R03BnWz7b%2BrfnJIus1YD6tv0T8uYL%2BstAM7Nvlha9OH%2BTeGE54VOhSf4wka%2BiMEyyo%2BXzFfLJ6NFxQd7n9cv6bvb18%2FTmvzfw9%2FXyURayzqZNbtm8QoSC5OCuP%2Fz2u4eS9dUfLz%2B%2F%2F6563gwmliDLWd%2BPlr%2FOByx%2F2eSFjmAUrgMHkV6kiXz5tPASdLeybPLtEwYNblskSx%2BfAXzoWzPkX1r2wzy97Sr0wwh%2FFYQBvv7SDYOk0hSEN%2BSW%2FHbX8316gYNca%2B3jF76Mkyh8QJUbaw5KPniPKErQcwES%2BSB9ROESJdELviT%2FVtAodHPIaxQAT1v8QDlvWxSxo%2BWNVo7Z%2BabzLV3wQU6aBgiADJW%2BolU0uZInF2aM399KvDAgP7xa%2BZ6Nzx4RQ8YCkUI8Gq6fYnnmh%2FYDbkr%2FErJ6wTy%2FikdpQsB8jgNN1Csk3VLM8r15gFt85KYE3HZMMESIgR%2FTv8ivSsIVQ%2BUJlKcS%2BWy%2B%2BYN0kryknZDWLS7J01qzOPTXCbqIbPqApHVzZm76oWwAijIB7Nr2nN%2FSXoJb4Z%2Fgz%2FDnQsYjc4kZUmJ5AYryruzQ961V7M3SASUPMPetOM6PdwA3e%2B978n7pZXnDTTosaUtnMIYGKMNYNxkYm5AD401j6zBmmc09Wq58jFeMjSpe64F0BORAgIRNAalKZbaqU9FcZKsSj612hkeFwaP45cM9bplG1hI9hdEDg0r8sklZ4lFk2Xi8CG0YMC09xyG3X0Yo9v61tuRahV6QpO%2BkXk7Ua9LXOgnjLVi4cq9I2GaiUG5KMkMWVUIo%2BjFKBFR1UTOxINTp%2Fww5AeCQU%2B6Kmup%2BVaYVGYj1wBU59Zap6lliQXKJt0gHMJEySyAt%2Be9cL5KE6MwXZJTgNG2NxZRbiFjub5rwgaEBVYUulhqaYwiKpsyEmSHbAkKupqmqbSMLY2FKGEqKmOwnLuJVpoBLDBfyFTf5U%2F355072avve6jZTmL0gRskvmMiYHhIEoqZnh5WWXwnc6S%2B63jPhm50BGSgl5CqyaBpS4Z%2FCQBeDW9dZ8OJmRe4IvxqDXzxAiNhe6X%2FYPsoUPkJi6e5%2FN6PEfOMSc2N5no7E1BmMpkCU7lCE32sCtXTMZuRoTo6gBMw3JUO1pkQ0X5ehcJ8MNTn0VboirzGK0FyEyo5pupKrCaZh24Li6pJgScAViLTQHRnJrqM0EqG3muj85c3%2F3clv0w62npPKm2bfhpGDesBshe8oBKQMMHVFhDKLzc58IGZP2OxVPpqAfEb5eKCLQym7OHTAwtRQOAxUk7pCKbV4CjCdevbCQ1E86mvnhUezKR61iodjI6eH09cAYOCYMkl4RUIuMYvJc9bNNnOvvl0oHenh0Pt0cAA2DNCtema%2F%2BB6e71GqkmVkUwgVA3sRRreEutdehBUeEnzISD7LGMTNbBPQaci9Nijb8i9ZNE6EVcF4%2BuV%2F3z7ddQnJCgQVAsGCp0JVGQyqHAyqnWGQ9eGP8u2dyDcZnp58Y134V2Hg4pZg7gXPb0u8NXZ7msZx0s3oVbr17b8fpdvR0q0xIk9durE%2B%2BOvM6b7yQw8tyXBA6StyvFHavXVpp5pmGatcacfnsD0JP9Ybn0NTusbDIv1CvIkr3wrQr29LEDZ2aGqvC0IoqgVBqDNkBjwfUneCcPTCUy%2B8ppoOBLYmSLptCQpQHWGmuroAzZkG5JkrWypq5IXXtL%2B%2Fe%2Bj2aSff7QyCBIFlfqKKHHelxhN3ikhzudoHGxueQ84c3eWnYZQswnkYWP6HbetlOSN0e81NmPJpgrefKElecjARblDmNejZS74Vjr%2BTrkQ1P7t%2BzntOT17oSYDf91vxpHAXOd3elp5t73MuSB4xYW1E3nh21jj1fPo4cWJFCb0o50VpW34NC2fImxAbZ34zkRSH68hGr1y3yZu2ojmqg0pCwVcxGSE%2FSxLdXtRF1irrC79LMGciXIBkNRBBlWlXj9mfINWwSPMKjwn%2B46NsHBN8S6p6sRFmQmyUXkruczzXzfqK8p5iEplec7wTZJDy1OOuxGBdZrJLN9lkxee%2FMikmnvOYjCRKkqGW2AwNq9Qmed55agAVLgldN8bgq2Ji8wxHwIT1URPFBU%2FRbsTeqIKfiwquVPxNRk1%2FU3cJElQVG3WzqWoi3Z6pQLB1aSYopqYLloW1NFWFmooUFyrE%2Bd1AN%2Fvr6uHqR4I%2BHaubwcaBZKKcAXP7zyhrahoLO01lUUfb2gcd63PP85Svwohd6HHOpl1z2hlV2pVIx%2BEYvTo1Ieuffq%2F8QgMOVGf2TJBNB5CMKl0wFRcIrmJCVzZ1JMtlflHmDo%2FBSp3BO3Und2BSkIlnNUs51rK%2FqqgXGo5JQG6dxQCVx2NEpVc2wzrg7zB7sPyvI4t5hcUAnSVdV2kB3DWcrPrM0KvREk7O0Jbnv8zjIIop6yaZnY4VLzYaLTnBkxJDIkhboNTcPm4QoKwm4HDypXmuvFYWbnJpU0NdfCe0qcaOBydNDcn8Tkmj1aQNpCtKW6cNG9h4r7RhWBpvMXq%2FE6dGeOKdEEc1To44NbLk3w1xZBFqJfoow9OHm%2BWS%2B7SpS5s2EDsn9QHTcdX%2BWYfZBbKrkk%2BxKbv3DtC78eNlHZQ7xc2FH2oLGviJLtLPTn29YI8qw8qyroK5fHqzGSUjvXuWj%2F0SnKe7jATvVeb2S3CePjQSvG853ivNOR75dmkO3zfNtaoYH5zgPG%2FBSPD2xHg11Ds4wbvW0985wbUT09Nh13r6e6c3HFSK8yNBPJpXRj5%2BQIlNg57hOvG9AA8hLVUqTcrRSDzc%2BDMlz3A5jyzHQ0y9ywp10suvd1Fn4z4pZhylSWu3YezlK1NmYZKEy8mulCQmMleESoH6kJ7nL09%2BkomPpsE6FH14RFnMLo3P5aHn5fOc1JAVradYEddx%2Bls14dR86T9QYBlMnOx8XqTf6AxMOoOdHhNpJRHS7Nnvha%2F2ZdKK%2BiZ79nvxyx2ptPvKVxSzY5tRfn8ObG5l7c2BpYGl9nJg01svosh6KVyQR623PdN8SQpfWF49YoJKdd7K9YIKXrseH2RP0G7mJWu63mHRMslLjq3YCrMVhI9rnk464bIxW9XLoNVVdoFCzwt86TQqQPTL%2BjmRGSiedUqK0ZRQABxZuIK3rLIzRYt2PGbBTWUZ6yDAlQRNQ66gSJormAAiQTNmM101oKJazeqK%2FfXPT%2F3n07dFLeZzXF5tY5RW64jtX%2B2r6SLFRtsLfvnO264deYM5bzch2DbNvuYQECoYEDhr3vo19Hnpcm%2FC0D8Rig9IcL7wYaf41ee7UZV946qsQLJLTkyZldkowkUwX%2FtW9KbUWbl5fe4ddRRqq7O8ZdPdcZSx0jxVZxUIVBs5qqAokiQoqm4IM2Sbgm4jyTYVS5oRx34DdTa6ln7Ml3O6TvNgZbU5BitySybL819XVnXO6gy9hdUZfE21a73lbWmqzel%2Fepoqz2oeNdXOZvzwmipgRrnXEIL%2BtkMIFCADhBCOgwVk%2BMCn%2B%2FtbLlZOo6AFBTK%2FekWTKUoKWtDI2ktpmE%2B3noWsDTKNtzPygAlZr67NQayi7Vls1pzFtPTuqczis4wPdwalwVAhnxYqdicP5yrdFi9UfyNfCJn1ji00CcDVc6a0VfS7r1n01l6v8opIdJfQrPISZs6uN19nraQhr5i7QyU8XWFDE%2B7bqJ6EAXpmwoaNj5IQfkpg30N5jsLo6WQcDW%2FH0ylTx%2BbpODoV1nTdh8qzdng2TofcsyvYXn8nb1ewzuxShed6ep%2F%2BTiQrwNYAFGzDUgTFNTRhhkxDkExrpluuIrvOa0VsblRVefn0f993ctPOACdXQvFwf%2BFtjndT7ar2DM3mHFNxJ%2BeWigsrC%2FJ4mbg6py42bWsfS2xyWK%2BW1ps2tBStpqFFRdrAebgyKCtHWq4c7crDBfqr13eTh6soI2KHRywVqmeGWEUdArG7l8cd7bf4y4tpEnpawDkzHM7NLUHn9PFuCYG4W0F57RQtLHaoY4LK7lKnsCKRu%2FNaKOzKq4zqaaHubYnvGihSd6DoYp0sMIU818sXMZCZTV49SH1gFvt1FxZNUavbXbqy5vZAW4OG%2BiHKLc3dJBUN2E3%2F1XKffLA%2F6tNvl6CW%2B2S3pdaVUgoqTFHlrDXcbGdW2lq7MwtnYP9%2FfRk%2FoKzW667ykk%2FLja906Mb%2FiOKS3%2F5c5WFrbnosD4FMUylb2uWg%2FEAbIVvxqHUoEM1z4Q6HbsMyIFepvX%2FKaW2fQhe99IuJc8sHqE3c1iXGQdbdhqo0wAjl18075gZZef2Gqv1YvaEbg1BlYwT3JKJzugJJ3ZWMdEDcGEDNOE4AdS9i6PZjXego92i5Iu%2BNTRYo3St7TLhZGDkoEvJk1Yv0maJfBKHY%2Fiv3d67R0gqczQL1eb5tFDe%2Fwd1sSy3lF9goji0vOkftqV2wypUK9icPXXYJ18W%2F64hA4Bo9%2FnHLruYaN4p6VykQAlDKqjvQqB%2B%2FuEiIW8S8s4ow6qBefXrc5daKHej0dKrv1fvUum596gk6Fa2%2BQ895vle17aPAXtDdqlOIMNsmOmsiKJm9rc9OLrbmZZdESdUq%2FvCTl4u7tysnfy6VZEtkJ3d0Z6M6oYlYDG3H7MCTFo1q41VOFU9Z3T0Uu0sOVNkK2SxqP3osNM85RVBtvGE0kI7MEexqEyr%2B%2B9XYFWRv1lSBsjUTqPZSaUIqxF9%2BmKbKSTU7itgQ4txLfkRoRR4nJNy4O4pW1huScjjGdlcxjSEgr0ZTG5VwXlWTCgS89VaIJNnh1qvfcKdX16O0eOvSQqnspzC8uKClHYrbQ6893yG%2FRbaIllbrePG2ZEXj7F7jyPIZgEfSzmSFxvqKGfrRFPBS0i%2BTA1sgL4dIVYJXU2xp%2Bre3nOP38L0ZeZvYthBxkRPZ8INywFiMH%2BddEnDP9qAq3CMqeJ6NzjbB1lhyjUsZ%2Bw9oqa2HKw%2BLaIFK6VqgmHtCWqAa02p%2BB%2FXl7bxDf%2FX6boJg2u5qgkf7dm5TKcfGNioxkG2yW7wmVr6PCn6einl1bs4eyndacfZUEiqP9PVscFrm25ttJLr3BWnn520Gk6G9zXV5MhXoAxQdOIgna5VVDMAArzNY5gapfENH%2FFIdMXsCmO0mM4bBmF5NTDGoJUL7yB41v20Lvv7RD%2FbcwOTYNL6hn%2Fm1Oz6wDfkwKkU1VPTp%2FvMN8f7c3bHfpRn1V8VKEpNNIYnT1SNoCK6NVFRDNSsyX2lFlags2KW99qBIsO75QgoyCRtefxnL556ZI7B5RoVWWdZrmsN7AmvEGN5JHQLJcWzFlqGAdMMVFFeTBVOTbEHRAEaPg2zLLm8jUNk04OH6%2B7cHONs5Aety0l1J%2Fbv9y4oItULhAbkEMlXaW3QVi1qRriXoxVupD1OVceu4gj3Uc2vgUmtZTR2wKuMuG77K%2BaQKtLJ3YtTUGj2Z9RTetkS5Th0mW4b5N8KCzn5Ap5yZrb%2BqjDWSYiSrh5ZkPpdsV2oVDeVelySzZBljlju4bUx%2B8BZFHh7bVKMaciEJFXonklCos%2FHR4pJB4gP%2BDwoiNPfw8FKbL1XhmZzA4vrCnYW6TodP0InSij8YgnKeVDsLCoVK8Vqh0kN3XERnYxHVlaRUmxxNufdlygHAKdHUsy2n8zZUrwCxaobtzR%2FzyReXlv0wTxHBUmFHVlk1rYDdpIJvoVnLl2QRv8QJWoqY7NhYewojZ4UZXCza%2BIngFEpkBKckLDRN081%2BkOt%2BxEkY4Q7Fn6sGWQV689RPWVTkgjmllVmcbIhqwdoCCptXAHAXlDEWgUEjne3jYpiQwIEqTFFpKlpQkmjIxutKE0ehOYekA731YMFxcGE93LuknHT%2BCg%2BdHG3U1ZdlqRySgCdkF3H3Q6mxiejBm5LkCXrlGSjzZuBm75JNQUiQn9xaCQZCkLaQzcc6rPirlAW6zpPnvJQwoLUgz%2FnbE7GuhnF7olaVuEpirg5Ymve6PRHgaXAjxXud5P0SnF0h8EYIfpF%2BhiY4M8U1TvJ9vzuQdc3U4Tuf4saJTXHIxv7fyBSfTmX8b2iCs1J8aIrLPK16P4GhRj4cAtt5OrIVeeGEFtvE9lVCVx%2FXSzrevXwn9yP2v3hn67nsFCGqtl8IALlXiPCW67QHkSI4sgqt1mqFp%2FrjiJjDEMOzDEBXi4H5iNmtN3SDmLzuxSJcj6A5EDQcQQS62lWbD5oa9uRNRt45okXAUv9dER5xLU3i5Ole3ckkmxl92h594oHv7NRrvmxlIVitvtlMwj7qj68D7591HoKvIHKsNn461cb1xlmNApTKy8l49cYh4EyfzuqN66y35gtWqpBFMrgxZ8NAxAe%2FXIWrl18PmWj4IAoJ4rcuflJU43PokEDJh%2F8H"></iframe>

## Scénarios pris en charge

### S1 - Kill des pods

**Description** - Ce scénario permet de tester la capacité des déploiements à gérer la perte d'un pod et à se remettre en état de marche. Il évalue la résilience des déploiements.

**Action** - Sélection aléatoire d'un pod d'un déploiement et suppression de ce pod.

**Comportement attendu** :

1. Aucune perte de connexion n'est observée (liveness probe toujours up)
2. Le pod supprimé est immédiatement remplacé

**Implémentation** - Un HPA a été mis en place sur les déploiements avec un minReplicas défini à 2.

### S2 - Epuisement des ressources d'un pod

**Description** - Ce scénario permet de tester la capacité des déploiements à gérer une hausse soudaine de la consommation CPU et RAM d'un pod.

**Action** - Sélection aléatoire d'un pod d'un déploiement stress du pod.

**Comportement attendu** :

1. Aucune perte de connexion n'est observée (liveness probe toujours up)
2. Le déploiement ajoute automatiquement des pods supplémentaires afin de supporter la charge

**Implémentation** - Un HPA a été mis en place sur les déploiements avec un minReplicas défini à 2 et les conditions de scale suivantes :

- targetCPUUtilizationPercentage: 80
- targetMemoryUtilizationPercentage: 80
